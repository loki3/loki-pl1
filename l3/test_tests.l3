// unittests for test.l3

:fizzbuzz20 v= .[ 1 2 :fizz 4 :buzz :fizz 7 8 :fizz :buzz 11 :fizz 13 14 :fizzbuzz 16 17 :fizz 19 :buzz
:fizzbuzz20 @doc ." Expected output for fizzbuzz from 1 to 20
:fizzbuzz20 @unittest true

:fizzBuzz1 @unittest func()
	fizzbuzz20 assert=? fizzBuzz1

:fizzBuzz2 @unittest func()
	fizzbuzz20 assert=? fizzBuzz2

:fizzbuzz3 @unittest func()
	fizzbuzz20 assert=? fizzbuzz3

:i @unittest func()
	{ :x 0 :y 3 } assert=? 3 i

:+ @unittest func()
	{ :x 4 :y 6 } assert=? { :x 1 :y 2 } + { :x 3 :y 4 }
	{ :x 3 :y 8 } assert=? 4 i + { :x 3 :y 4 }
	{ :x 1 :y 2 } assert=? 1 + 2 i
	{ :x 1 :y 2 } assert=? 2 i + 1

:* @unittest func()
	{ :x -12 :y 0 } assert=? 4 i * 3 i

// stub out tests & docstrings for the enum & its values
:days			@unittest ( stubFunc )
:days.sunday	@unittest ( stubFunc ) @doc ."
:days.monday	@unittest ( stubFunc ) @doc ."
:days.tuesday	@unittest ( stubFunc ) @doc ."
:days.wednesday	@unittest ( stubFunc ) @doc ."
:days.thursday	@unittest ( stubFunc ) @doc ."
:days.friday	@unittest ( stubFunc ) @doc ."
:days.saturday	@unittest ( stubFunc ) @doc ."

:isWeekend @unittest func()
	( isWeekend days.sunday )	assert=? true
	( isWeekend days.monday )	assert=? false
	( isWeekend days.tuesday )	assert=? false
	( isWeekend days.wednesday ) assert=? false
	( isWeekend days.thursday )	assert=? false
	( isWeekend days.friday )	assert=? false
	( isWeekend days.sunday )	assert=? true

:repeat @unittest func()
	:sum v= func ->n
		:add v= func [ ->a ->b ]
			( a >? 0 ) ? .[ [ ( a + b ) ( add [ ( a - 1 ) ] ) ]  [ b nil ]
		repeat [ 0 ( add [ n ] ) ]
	10 assert=? sum 4
	55 assert=? sum 10

:! @unittest func()
	1       assert=? 0 !
	1       assert=? 1 !
	24      assert=? 4 !
	3628800 assert=? 10 !


:fib1 @unittest func()
	1	assert=? fib1 0
	1	assert=? fib1 1
	2	assert=? fib1 2
	3	assert=? fib1 3
	5	assert=? fib1 4
	8	assert=? fib1 5

:fib2 @unittest func()
	1	assert=? fib2 0
	1	assert=? fib2 1
	2	assert=? fib2 2
	3	assert=? fib2 3
	5	assert=? fib2 4
	8	assert=? fib2 5
